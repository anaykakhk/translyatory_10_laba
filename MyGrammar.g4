grammar MyGrammar;

// 1| E ::= E '|' T | T
// 2| T ::= T '&' D| D
// 3| D::= D '^' H|H
// 4| H::= ~F | F
// 5| F ::= (E) | i

e: e '|' t | t;
t: t '&' d | d;
d: d '^' h | h;
h: '~' f |f;
f: '(' e ')' | I;

I: [0-9]+;

// 1^(2&3) Результат: 3
// 3&(1|2) результат: 3
// ~2^3&4 результат: 0
// 1^((2|3)&4) результат: 5
// (((1|2)&3)^4) результат: 7
// (2^3)&(~4|5)  результат: 1
// 1&2|3^4  результат: 7
// ~(1|2)&(3|4) результат: 4
